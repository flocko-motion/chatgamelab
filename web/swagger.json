{
    "schemes": [
        "http",
        "https"
    ],
    "swagger": "2.0",
    "info": {
        "description": "API for ChatGameLab - an AI-powered interactive game platform",
        "title": "ChatGameLab API",
        "contact": {
            "name": "ChatGameLab Team",
            "url": "https://chatgamelab.com"
        },
        "license": {
            "name": "MIT"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api",
    "paths": {
        "/apikeys": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns the user's API keys and all their linked shares (org shares, sponsorships)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "List API keys",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.ApiKeysResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/apikeys/new": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a new API key with automatic self-share",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "Create API key",
                "parameters": [
                    {
                        "description": "API key data",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.CreateApiKeyRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.ApiKeyShare"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/apikeys/{id}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns share info and linked shares for an API key share",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "Get API key info",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Share ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.ApiKeyInfoResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid share ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "If ?cascade=true, deletes key and all shares; otherwise unshares (deletes single share)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "Delete or unshare API key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Share ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "boolean",
                        "description": "Delete key and all shares",
                        "name": "cascade",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.ApiKeyShare"
                        }
                    },
                    "400": {
                        "description": "Invalid share ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates API key name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "Update API key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Share ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Update request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.UpdateApiKeyRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.ApiKeyShare"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/apikeys/{id}/default": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets the given API key as the user's default key for session creation",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "Set default API key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Share ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.ApiKeyShare"
                        }
                    },
                    "400": {
                        "description": "Invalid share ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/apikeys/{id}/shares": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Shares an API key with a user, workshop, or institution",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "Share API key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Share ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Share request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.ShareRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.ApiKeyShare"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/apikeys/{id}/sponsoring": {
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates properties of an API key share (e.g. allowPublicGameSponsoring). Owner only.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "apikeys"
                ],
                "summary": "Update API key share",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Share ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Update request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.UpdateApiKeyShareRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.ApiKeyShare"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/auth/check-name": {
            "get": {
                "description": "Checks if a username is available for registration",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Check if name is available",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Name to check",
                        "name": "name",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "boolean"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/auth/logout": {
            "post": {
                "description": "Clears the session cookie for participant users",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Logout user",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/auth/participant-login": {
            "post": {
                "description": "Logs in a participant using their access token and sets a session cookie",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Login with participant token",
                "parameters": [
                    {
                        "description": "Participant token",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.ParticipantLoginRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Invalid token",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/auth/register": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Registers a new user after Auth0 authentication. Requires valid Auth0 token.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Register new user",
                "parameters": [
                    {
                        "description": "Registration details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.RegisterRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Name already taken",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games": {
            "get": {
                "description": "Returns a list of games. If authenticated, includes user's private games.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "List games",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Search games by name (case-insensitive)",
                        "name": "search",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Sort field (name, createdAt, modifiedAt)",
                        "name": "sortBy",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Sort direction (asc, desc)",
                        "name": "sortDir",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter type (all, own, public, organization, favorites)",
                        "name": "filter",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.Game"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/favourites": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns the list of games the authenticated user has marked as favourites",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Get user's favourite games",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.Game"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/new": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a new game from JSON or YAML. Accepts either a simple name or full game object.",
                "consumes": [
                    "application/json",
                    "application/x-yaml"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Create game",
                "parameters": [
                    {
                        "description": "Create game request (JSON or YAML)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.CreateGameRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}": {
            "get": {
                "description": "Returns a single game by its ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Get game by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates a game's properties",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Update game",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Game data",
                        "name": "game",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Deletes a game by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Delete game",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Failed to delete",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/api-key-status": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Checks whether an API key can be reso        lved for the current user and game.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Check API key availability",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "boolean"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/available-keys": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns a prioritized list of API keys available to the user for playing this game",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Get available API keys for a game",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.AvailableKey"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/clone": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a copy of a game for the authenticated user",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Clone game",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID) to clone",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Failed to clone",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/favourite": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Adds a game to the authenticated user's favourites",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Add game to favourites",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "boolean"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Removes a game from the authenticated user's favourites",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Remove game from favourites",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "boolean"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/private-share": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns the current private share configuration for a game.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Get private share status",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.PrivateShareStatus"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Enables private sharing for a game with a sponsored API key and optional session limit.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Enable or configure private share",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Share configuration",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.PrivateShareRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.PrivateShareStatus"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Disables private sharing by clearing the share token and sponsor key.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Revoke private share",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.PrivateShareStatus"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/sessions": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lists sessions for a game",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "List game sessions",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.GameSession"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a new session for a game and returns the session with first message",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "Create game session",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.SessionResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/sponsor": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets a public sponsorship on a game using an API key share",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Sponsor a game",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Sponsor request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SponsorGameRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Removes the public sponsorship from a game",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Remove game sponsorship",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/games/{id}/yaml": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Exports a game's configuration as YAML format",
                "produces": [
                    "application/x-yaml"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Export game as YAML",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid game ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates a game's configuration from YAML format",
                "consumes": [
                    "application/x-yaml"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "games"
                ],
                "summary": "Import game from YAML",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Game ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Game YAML content",
                        "name": "yaml",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Game"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Failed to update",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/institutions": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lists all institutions",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "List institutions",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.Institution"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a new institution",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Create institution",
                "parameters": [
                    {
                        "description": "Institution details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.CreateInstitutionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Institution"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/institutions/{id}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Gets an institution by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Get institution",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Institution"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Soft-deletes an institution (admin only)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Delete institution",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates an institution",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Update institution",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Institution details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.UpdateInstitutionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Institution"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/institutions/{id}/apikeys": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns all API keys shared with an institution (heads and staff only)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Get institution API keys",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.ApiKeyShare"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/institutions/{id}/free-use-key": {
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets or clears the free-use API key share for an institution.\nAny institution member can use this key to play for free.\nPass null shareId to clear.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Set institution free-use API key share",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Share ID to set (null to clear)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SetInstitutionFreeUseKeyRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Institution"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/institutions/{id}/members": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns all members of an institution",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Get institution members",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.User"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/institutions/{id}/members/{userID}": {
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Removes a member from an institution (head or admin only)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "institutions"
                ],
                "summary": "Remove member from institution",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "userID",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lists invites scoped by user permissions - shows invites for the current user to join an institution",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "List incoming invites for the current user",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/routes.InviteResponse"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/all": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lists all invites. Requires admin role.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "List all invites (admin only)",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/routes.InviteResponse"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/institution": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a targeted invite for a user to join an institution as head or staff",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "Create institution invite",
                "parameters": [
                    {
                        "description": "Invite details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.CreateInstitutionInviteRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.InviteResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/institution/{institutionId}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lists all invites that invite users to join a specific institution. Requires head/staff role in the institution or admin.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "List outgoing invites from an institution",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "institutionId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/routes.InviteResponse"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/workshop": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates an open invite for users to join a workshop as participants",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "Create workshop invite",
                "parameters": [
                    {
                        "description": "Invite details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.CreateWorkshopInviteRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.InviteResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/{idOrToken}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Retrieves a specific invite. Auto-detects whether parameter is a UUID (ID) or string (token). Admins can see any invite, regular users can only see invites targeted to them or created by them.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "Get invite by ID or token",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Invite ID (UUID) or token",
                        "name": "idOrToken",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.UserRoleInvite"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/{idOrToken}/accept": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Accepts an invite by ID or token. For workshop invites, can be used anonymously (creates ad-hoc user). For institution invites, requires authentication.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "Accept invite",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Invite ID (UUID) or token",
                        "name": "idOrToken",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.AcceptInviteResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/{id}": {
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Revokes a pending invite (creator, admin, or institution staff for workshop invites)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "Revoke invite",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Invite ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/invites/{id}/decline": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Declines an invite by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "invites"
                ],
                "summary": "Decline invite",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Invite ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.UserRoleInvite"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/languages": {
            "get": {
                "description": "Returns a list of available languages for the application",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "languages"
                ],
                "summary": "Get available languages",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/routes.Language"
                            }
                        }
                    }
                }
            }
        },
        "/languages/{code}": {
            "get": {
                "description": "Returns the translation JSON file for the specified language code",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "languages"
                ],
                "summary": "Get locale file for a specific language",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Language code (e.g., 'fr', 'de', 'no')",
                        "name": "code",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/messages/{id}/audio": {
            "get": {
                "description": "Returns the audio narration for a message (MP3 format).\nNo authentication required - message UUIDs are random and unguessable.",
                "produces": [
                    "audio/mpeg"
                ],
                "tags": [
                    "messages"
                ],
                "summary": "Get message audio",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Message ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "400": {
                        "description": "Invalid message ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Message or audio not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/messages/{id}/image": {
            "get": {
                "description": "Returns the generated image for a game session message.\nChecks in-memory cache first (for partial/WIP images), then database.\nNo authentication required - message UUIDs are random and unguessable.",
                "produces": [
                    "image/png"
                ],
                "tags": [
                    "messages"
                ],
                "summary": "Get message image",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Message ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "PNG image",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "400": {
                        "description": "Invalid message ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Message or image not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/messages/{id}/image/status": {
            "get": {
                "description": "Returns the current hash and completion status of an image being generated.\nFrontend can poll this to detect when new partial/final images are available.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "messages"
                ],
                "summary": "Get image generation status",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Message ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.ImageStatusResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid message ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/messages/{id}/status": {
            "get": {
                "description": "Returns the current state of a message: text, image status, errors.\nFrontend polls this as a safety net when SSE drops, on reload, or for image progress.\nNo authentication required - message UUIDs are random and unguessable.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "messages"
                ],
                "summary": "Get message completion status",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Message ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.MessageStatusResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid message ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Message not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/messages/{id}/stream": {
            "get": {
                "description": "Server-Sent Events endpoint for streaming message chunks.",
                "produces": [
                    "text/event-stream"
                ],
                "tags": [
                    "messages"
                ],
                "summary": "Stream message updates (SSE)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Message ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "SSE stream",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Invalid message ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Stream not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/platforms": {
            "get": {
                "description": "Returns all available AI platforms with their metadata",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "platforms"
                ],
                "summary": "List AI platforms",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.AiPlatform"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/play/{token}": {
            "post": {
                "description": "Creates a new anonymous game session using a private share link.\nNo authentication required  the share token grants access.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "play"
                ],
                "summary": "Create guest session via share token",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Private share token",
                        "name": "token",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.GuestSessionResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid or expired token",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Share limit reached",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/play/{token}/info": {
            "get": {
                "description": "Returns basic game info (name, description) for the welcome screen. No session is created.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "play"
                ],
                "summary": "Get game info via share token",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Private share token",
                        "name": "token",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.GuestGameInfo"
                        }
                    },
                    "400": {
                        "description": "Invalid token",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Game not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/play/{token}/sessions/{id}": {
            "get": {
                "description": "Returns session details for recovery after reload. Validates tokengamesession chain.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "play"
                ],
                "summary": "Get guest session via share token",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Private share token",
                        "name": "token",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Session ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Message inclusion: none|latest|all",
                        "name": "messages",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.SessionResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "Sends a player message to an anonymous session. Validates tokengamesession chain.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "play"
                ],
                "summary": "Send guest action via share token",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Private share token",
                        "name": "token",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Session ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Player action",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SessionActionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.GameSessionMessage"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Token/session mismatch",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/restart": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Admin-only endpoint that triggers a server restart.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "admin"
                ],
                "summary": "Restart server",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/roles": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns all available user roles",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "roles"
                ],
                "summary": "Get available roles",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.RolesResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/sessions": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns recent sessions for the authenticated user with game names",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "List user sessions",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Search by game name",
                        "name": "search",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Sort field: game, model, lastPlayed (default)",
                        "name": "sortBy",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/db.UserSessionWithGame"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/sessions/{id}": {
            "get": {
                "description": "Returns session details. Optional query parameter can include latest message.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "Get session",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Session ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Message inclusion: none|latest|all",
                        "name": "messages",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.SessionResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid session ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "Sends a player message/action to a session and returns the resulting message.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "Send session action",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Session ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Player action",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SessionActionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.GameSessionMessage"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Deletes a session and all its messages. User must be the owner.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "Delete session",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Session ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid session ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Re-resolves the API key for a session. Used when resuming a session whose API key was deleted.\nThe API key is resolved server-side using the same priority as session creation.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "Update session API key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Session ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.GameSession"
                        }
                    },
                    "400": {
                        "description": "Invalid request or no API key available",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/status": {
            "get": {
                "description": "Returns the current server status and uptime",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "status"
                ],
                "summary": "Get server status",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.StatusResponse"
                        }
                    }
                }
            }
        },
        "/system/settings": {
            "get": {
                "description": "Returns the global system settings",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "system"
                ],
                "summary": "Get system settings",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.SystemSettings"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "patch": {
                "description": "Updates the global system settings (admin only)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "system"
                ],
                "summary": "Update system settings",
                "parameters": [
                    {
                        "description": "Settings to update",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.UpdateSystemSettingsRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.SystemSettings"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/system/settings/free-use-key": {
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets or clears the global free-use API key (admin only).\nThe admin's own API key will be used directly.\nPass null apiKeyId to clear.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "system"
                ],
                "summary": "Set system free-use API key",
                "parameters": [
                    {
                        "description": "API Key ID to set (null to clear)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SetFreeUseApiKeyRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.SystemSettings"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns all users",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "List users",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.User"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/me": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns the currently authenticated user",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get current user",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/me/active-workshop": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets the active workshop for head/staff/individual users to enter workshop mode. Pass null workshopId to leave workshop mode.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Set active workshop (workshop mode)",
                "parameters": [
                    {
                        "description": "Workshop ID (null to leave)",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SetActiveWorkshopRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Updated user with workshop context",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden - not allowed for this role",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Workshop not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/me/language": {
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets the language preference for the authenticated user",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Update user language preference",
                "parameters": [
                    {
                        "description": "Language preference (ISO 639-1 code)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "properties": {
                                "language": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/me/stats": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns statistics for the authenticated user",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get current user statistics",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.UserStats"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/new": {
            "post": {
                "description": "Creates a new user without Auth0. Only available in dev mode.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Create user (dev only)",
                "parameters": [
                    {
                        "description": "Create user request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.UsersNewRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden (not dev mode)",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/{id}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns a user by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get user by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Invalid user ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "User not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates a user by ID. Non-admins may only update themselves.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Update user",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "User update",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.UserUpdateRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "User not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Soft-deletes a user (for removing participants)",
                "tags": [
                    "users"
                ],
                "summary": "Delete user",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "400": {
                        "description": "Invalid user ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/{id}/jwt": {
            "get": {
                "description": "Generates a JWT token for a user. Only available in dev mode.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Generate JWT (dev only)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.UsersJwtResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid user ID",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden (not dev mode)",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "User not found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/{id}/role": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets a user's role in the system",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Set user role",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Role details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SetUserRoleRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Removes a user's role",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Remove user role",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.User"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/version": {
            "get": {
                "description": "Returns the server version and build time",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "status"
                ],
                "summary": "Get server version",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/routes.VersionResponse"
                        }
                    }
                }
            }
        },
        "/workshops": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lists all workshops or workshops for a specific institution",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "List workshops",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Institution ID",
                        "name": "institutionId",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Search by name",
                        "name": "search",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Sort by field (name, createdAt, participantCount)",
                        "name": "sortBy",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Sort direction (asc, desc)",
                        "name": "sortDir",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Filter to active workshops only",
                        "name": "activeOnly",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/obj.Workshop"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a new workshop",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "Create workshop",
                "parameters": [
                    {
                        "description": "Workshop details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.CreateWorkshopRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Workshop"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/workshops/participants/{participantId}/token": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Gets the access token for a workshop participant (staff/heads only)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "Get participant token",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Participant ID",
                        "name": "participantId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/workshops/{id}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Gets a workshop by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "Get workshop",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Workshop ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Workshop"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Soft-deletes a workshop",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "Delete workshop",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Workshop ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            },
            "patch": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates a workshop",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "Update workshop",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Workshop ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Workshop details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.UpdateWorkshopRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Workshop"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/workshops/{id}/api-key": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Sets the default API key for workshop participants (staff/heads only)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "Set workshop default API key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Workshop ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "API key share ID",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/routes.SetWorkshopApiKeyRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/obj.Workshop"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/workshops/{id}/events": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Server-Sent Events endpoint for real-time workshop updates. Supports token via query param for EventSource compatibility.",
                "produces": [
                    "text/event-stream"
                ],
                "tags": [
                    "workshops"
                ],
                "summary": "Subscribe to workshop events (SSE)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Workshop ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Auth token (for EventSource which cannot send headers)",
                        "name": "token",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "SSE stream",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/httpx.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "db.UserSessionWithGame": {
            "type": "object",
            "properties": {
                "aiModel": {
                    "type": "string"
                },
                "aiPlatform": {
                    "description": "AI model used for playing.",
                    "type": "string"
                },
                "aiSession": {
                    "description": "JSON with arbitrary details to be used within that model and within that session.",
                    "type": "string"
                },
                "apiKey": {
                    "$ref": "#/definitions/obj.ApiKey"
                },
                "apiKeyId": {
                    "description": "API key used to pay for this session (sponsored or user-owned), implicitly defines platform.\nNullable: key may be deleted, session can continue with a new key.",
                    "type": "string"
                },
                "gameDescription": {
                    "type": "string"
                },
                "gameId": {
                    "type": "string"
                },
                "gameName": {
                    "type": "string"
                },
                "gameScenario": {
                    "type": "string"
                },
                "gameScenarioImagePrompt": {
                    "description": "Condensed, image-focused scenario guidance derived from GameScenario via ToolQuery.\nPersisted indirectly via AiSession cache, not as its own DB column.",
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "imageStyle": {
                    "type": "string"
                },
                "isOrganisationUnverified": {
                    "description": "Set to true when image generation fails due to organization verification required",
                    "type": "boolean"
                },
                "language": {
                    "description": "Language used for this session (ISO 639-1 code), locked at creation time from user preference.",
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "statusFields": {
                    "description": "Defines the status fields available in the game; copied from game.status_fields at launch.",
                    "type": "string"
                },
                "theme": {
                    "description": "AI-generated visual theme for the game player UI (JSON)",
                    "allOf": [
                        {
                            "$ref": "#/definitions/obj.GameTheme"
                        }
                    ]
                },
                "userId": {
                    "type": "string"
                },
                "userName": {
                    "type": "string"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "httpx.ErrorResponse": {
            "type": "object",
            "properties": {
                "code": {
                    "description": "Machine-readable error code",
                    "type": "string"
                },
                "message": {
                    "description": "Human-readable error message",
                    "type": "string"
                },
                "type": {
                    "description": "Deprecated: use Code instead",
                    "type": "string"
                }
            }
        },
        "obj.AiModel": {
            "type": "object",
            "properties": {
                "description": {
                    "description": "tier label e.g. \"Premium\"",
                    "type": "string"
                },
                "id": {
                    "description": "generic tier: \"high\", \"medium\", \"low\", \"max\"",
                    "type": "string"
                },
                "imageModel": {
                    "description": "model used for image generation (if different from Model)",
                    "type": "string"
                },
                "imageQuality": {
                    "description": "image quality: \"high\", \"medium\", \"low\" (default: \"low\")",
                    "type": "string"
                },
                "model": {
                    "description": "concrete model ID e.g. \"gpt-5.2\"",
                    "type": "string"
                },
                "name": {
                    "description": "display name e.g. \"GPT-5.2\"",
                    "type": "string"
                },
                "supportsAudioIn": {
                    "description": "whether this tier supports voice input (STT transcription)",
                    "type": "boolean"
                },
                "supportsAudioOut": {
                    "description": "whether this tier generates audio narration (TTS)",
                    "type": "boolean"
                },
                "supportsImage": {
                    "description": "whether this tier generates images",
                    "type": "boolean"
                }
            }
        },
        "obj.AiPlatform": {
            "type": "object",
            "properties": {
                "id": {
                    "description": "technical name without spaces, e.g. \"openai\"",
                    "type": "string"
                },
                "models": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.AiModel"
                    }
                },
                "name": {
                    "description": "display name e.g. \"OpenAI\"",
                    "type": "string"
                },
                "supportsApiKey": {
                    "description": "whether this platform supports user API keys",
                    "type": "boolean"
                }
            }
        },
        "obj.ApiKey": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "isDefault": {
                    "type": "boolean"
                },
                "keyShortened": {
                    "type": "string"
                },
                "lastErrorCode": {
                    "type": "string"
                },
                "lastUsageSuccess": {
                    "type": "boolean"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "name": {
                    "type": "string"
                },
                "platform": {
                    "type": "string"
                },
                "userId": {
                    "type": "string"
                },
                "userName": {
                    "type": "string"
                }
            }
        },
        "obj.ApiKeyShare": {
            "type": "object",
            "properties": {
                "allowPublicGameSponsoring": {
                    "type": "boolean"
                },
                "apiKey": {
                    "$ref": "#/definitions/obj.ApiKey"
                },
                "apiKeyId": {
                    "type": "string"
                },
                "game": {
                    "$ref": "#/definitions/obj.Game"
                },
                "id": {
                    "type": "string"
                },
                "institution": {
                    "$ref": "#/definitions/obj.Institution"
                },
                "isPrivateShare": {
                    "type": "boolean"
                },
                "isUserDefault": {
                    "type": "boolean"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "user": {
                    "$ref": "#/definitions/obj.User"
                },
                "workshop": {
                    "$ref": "#/definitions/obj.Workshop"
                }
            }
        },
        "obj.AvailableKey": {
            "type": "object",
            "properties": {
                "isDefault": {
                    "type": "boolean"
                },
                "name": {
                    "type": "string"
                },
                "platform": {
                    "type": "string"
                },
                "shareId": {
                    "type": "string"
                },
                "source": {
                    "description": "\"sponsor\", \"workshop\", \"institution\", \"personal\"",
                    "type": "string"
                }
            }
        },
        "obj.Game": {
            "type": "object",
            "properties": {
                "cloneCount": {
                    "type": "integer"
                },
                "creatorId": {
                    "description": "Creator info (populated when fetching games)",
                    "type": "string"
                },
                "creatorName": {
                    "type": "string"
                },
                "css": {
                    "description": "Additional CSS for the game, probably generated by the LLM.\nShould be validated/parsed strictly to avoid arbitrary code execution.",
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "firstImage": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "firstMessage": {
                    "description": "Quick start: pre-generated first scene of the game.\nThis is generated content (first output after the system message) and may be\nregenerated from time to time to avoid being too static.",
                    "type": "string"
                },
                "firstStatus": {
                    "type": "string"
                },
                "icon": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "id": {
                    "type": "string"
                },
                "imageStyle": {
                    "description": "What style should the images have?",
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "name": {
                    "type": "string"
                },
                "originalCreatorId": {
                    "description": "Original creator info (populated when fetching games, if originally cloned)",
                    "type": "string"
                },
                "originalCreatorName": {
                    "type": "string"
                },
                "originallyCreatedBy": {
                    "description": "Tracking: original creator (for cloned games) and usage statistics",
                    "type": "string"
                },
                "playCount": {
                    "type": "integer"
                },
                "privateShareHash": {
                    "description": "Private share links contain secret random tokens to limit access to the game.\nThey are sponsored, so invited players don't require their own API key.",
                    "type": "string"
                },
                "privateShareRemaining": {
                    "type": "integer"
                },
                "privateSponsoredApiKeyShareId": {
                    "type": "string"
                },
                "public": {
                    "description": "Access rights and payments. public = true: discoverable on the website and playable by anyone.",
                    "type": "boolean"
                },
                "publicSponsoredApiKeyShareId": {
                    "description": "If public, a sponsored API key share can be provided to pay for any public plays.",
                    "type": "string"
                },
                "statusFields": {
                    "description": "The status fields available to the LLM, shaping the JSON format for status.",
                    "type": "string"
                },
                "systemMessageGameStart": {
                    "description": "How should the game start? First scene? How is the player welcomed?",
                    "type": "string"
                },
                "systemMessageScenario": {
                    "description": "Game details and system messages for the LLM.\nWhat is the game about? How does it work? Player role? World description?",
                    "type": "string"
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.GameTag"
                    }
                },
                "theme": {
                    "description": "Optional visual theme override. When set, used directly instead of AI-generating per session.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/obj.GameTheme"
                        }
                    ]
                },
                "workshopId": {
                    "description": "Optional workshop scope (games can be created within a workshop context)",
                    "type": "string"
                }
            }
        },
        "obj.GameSession": {
            "type": "object",
            "properties": {
                "aiModel": {
                    "type": "string"
                },
                "aiPlatform": {
                    "description": "AI model used for playing.",
                    "type": "string"
                },
                "aiSession": {
                    "description": "JSON with arbitrary details to be used within that model and within that session.",
                    "type": "string"
                },
                "apiKey": {
                    "$ref": "#/definitions/obj.ApiKey"
                },
                "apiKeyId": {
                    "description": "API key used to pay for this session (sponsored or user-owned), implicitly defines platform.\nNullable: key may be deleted, session can continue with a new key.",
                    "type": "string"
                },
                "gameDescription": {
                    "type": "string"
                },
                "gameId": {
                    "type": "string"
                },
                "gameName": {
                    "type": "string"
                },
                "gameScenario": {
                    "type": "string"
                },
                "gameScenarioImagePrompt": {
                    "description": "Condensed, image-focused scenario guidance derived from GameScenario via ToolQuery.\nPersisted indirectly via AiSession cache, not as its own DB column.",
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "imageStyle": {
                    "type": "string"
                },
                "isOrganisationUnverified": {
                    "description": "Set to true when image generation fails due to organization verification required",
                    "type": "boolean"
                },
                "language": {
                    "description": "Language used for this session (ISO 639-1 code), locked at creation time from user preference.",
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "statusFields": {
                    "description": "Defines the status fields available in the game; copied from game.status_fields at launch.",
                    "type": "string"
                },
                "theme": {
                    "description": "AI-generated visual theme for the game player UI (JSON)",
                    "allOf": [
                        {
                            "$ref": "#/definitions/obj.GameTheme"
                        }
                    ]
                },
                "userId": {
                    "type": "string"
                },
                "userName": {
                    "type": "string"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "obj.GameSessionMessage": {
            "type": "object",
            "properties": {
                "audio": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "gameSessionId": {
                    "type": "string"
                },
                "hasAudioIn": {
                    "description": "true when voice input (STT) is available for this session tier",
                    "type": "boolean"
                },
                "hasAudioOut": {
                    "description": "true when audio narration (TTS) is active for this message",
                    "type": "boolean"
                },
                "hasImage": {
                    "description": "true when image generation is active for this message",
                    "type": "boolean"
                },
                "id": {
                    "type": "string"
                },
                "image": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "imagePrompt": {
                    "type": "string"
                },
                "message": {
                    "description": "Plain text of the scene (system message, player action, or game response).",
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "plot": {
                    "type": "string"
                },
                "requestExpandStory": {
                    "type": "string"
                },
                "requestImageGeneration": {
                    "type": "string"
                },
                "requestResponseSchema": {
                    "type": "string"
                },
                "requestStatusUpdate": {
                    "type": "string"
                },
                "responseRaw": {
                    "type": "string"
                },
                "seq": {
                    "description": "Sequence number within the session, starting at 1",
                    "type": "integer"
                },
                "statusFields": {
                    "description": "JSON encoded status fields.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.StatusField"
                    }
                },
                "stream": {
                    "type": "boolean"
                },
                "tokenUsage": {
                    "$ref": "#/definitions/obj.TokenUsage"
                },
                "transcription": {
                    "description": "Transcription holds the text result of audio-to-text conversion (transient, not persisted).\nReturned in the action response so the client can display what was recognized.",
                    "type": "string"
                },
                "type": {
                    "description": "player: user message; game: LLM/game response; system: initial system/context messages.",
                    "type": "string"
                },
                "urlAnalytics": {
                    "type": "string"
                }
            }
        },
        "obj.GameTag": {
            "type": "object",
            "properties": {
                "gameId": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "tag": {
                    "type": "string"
                }
            }
        },
        "obj.GameTheme": {
            "type": "object",
            "properties": {
                "animation": {
                    "description": "optional animation override: \"none\", \"stars\", \"bubbles\", etc. Empty = use preset default.",
                    "type": "string"
                },
                "preset": {
                    "description": "preset name (e.g., \"space\", \"medieval\", \"pirate\")",
                    "type": "string"
                },
                "statusEmojis": {
                    "description": "maps status field names to emoji, e.g. {\"Health\": \"\", \"Gold\": \"\"}",
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    }
                },
                "thinkingText": {
                    "description": "optional loading phrase override, e.g. \"The tale continues...\" Empty = use preset default.",
                    "type": "string"
                }
            }
        },
        "obj.Institution": {
            "type": "object",
            "properties": {
                "freeUseAiQualityTier": {
                    "description": "high/medium/low, nil = server default",
                    "type": "string"
                },
                "freeUseApiKeyShareId": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "members": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.InstitutionMember"
                    }
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "obj.InstitutionMember": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "role": {
                    "$ref": "#/definitions/obj.Role"
                },
                "userId": {
                    "type": "string"
                }
            }
        },
        "obj.InviteStatus": {
            "type": "string",
            "enum": [
                "pending",
                "accepted",
                "declined",
                "expired",
                "revoked"
            ],
            "x-enum-varnames": [
                "InviteStatusPending",
                "InviteStatusAccepted",
                "InviteStatusDeclined",
                "InviteStatusExpired",
                "InviteStatusRevoked"
            ]
        },
        "obj.Meta": {
            "type": "object",
            "properties": {
                "createdAt": {
                    "type": "string"
                },
                "createdBy": {
                    "$ref": "#/definitions/uuid.NullUUID"
                },
                "modifiedAt": {
                    "type": "string"
                },
                "modifiedBy": {
                    "$ref": "#/definitions/uuid.NullUUID"
                }
            }
        },
        "obj.Role": {
            "type": "string",
            "enum": [
                "admin",
                "head",
                "staff",
                "participant",
                "individual"
            ],
            "x-enum-varnames": [
                "RoleAdmin",
                "RoleHead",
                "RoleStaff",
                "RoleParticipant",
                "RoleIndividual"
            ]
        },
        "obj.StatusField": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "value": {
                    "type": "string"
                }
            }
        },
        "obj.SystemSettings": {
            "type": "object",
            "properties": {
                "createdAt": {
                    "type": "string"
                },
                "defaultAiQualityTier": {
                    "description": "ultimate server-wide fallback (e.g. \"medium\")",
                    "type": "string"
                },
                "freeUseAiQualityTier": {
                    "description": "tier for system free-use key, nil = use default",
                    "type": "string"
                },
                "freeUseApiKeyId": {
                    "type": "string"
                },
                "freeUseApiKeyName": {
                    "type": "string"
                },
                "freeUseApiKeyPlatform": {
                    "type": "string"
                },
                "freeUseApiKeyWorking": {
                    "type": "boolean"
                },
                "id": {
                    "type": "string"
                },
                "modifiedAt": {
                    "type": "string"
                }
            }
        },
        "obj.TokenUsage": {
            "type": "object",
            "properties": {
                "inputTokens": {
                    "type": "integer"
                },
                "outputTokens": {
                    "type": "integer"
                },
                "totalTokens": {
                    "type": "integer"
                }
            }
        },
        "obj.User": {
            "type": "object",
            "properties": {
                "aiQualityTier": {
                    "description": "high/medium/low, nil = server default",
                    "type": "string"
                },
                "auth0Id": {
                    "type": "string"
                },
                "deletedAt": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "language": {
                    "description": "ISO 639-1 language code (e.g., \"en\", \"de\", \"fr\")",
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "name": {
                    "type": "string"
                },
                "role": {
                    "$ref": "#/definitions/obj.UserRole"
                }
            }
        },
        "obj.UserRole": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "institution": {
                    "$ref": "#/definitions/obj.Institution"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "role": {
                    "$ref": "#/definitions/obj.Role"
                },
                "userId": {
                    "type": "string"
                },
                "workshop": {
                    "$ref": "#/definitions/obj.Workshop"
                }
            }
        },
        "obj.UserRoleInvite": {
            "type": "object",
            "properties": {
                "acceptedAt": {
                    "type": "string"
                },
                "acceptedBy": {
                    "type": "string"
                },
                "expiresAt": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "institutionId": {
                    "type": "string"
                },
                "inviteToken": {
                    "type": "string"
                },
                "invitedEmail": {
                    "type": "string"
                },
                "invitedUserId": {
                    "type": "string"
                },
                "maxUses": {
                    "type": "integer"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "role": {
                    "$ref": "#/definitions/obj.Role"
                },
                "status": {
                    "$ref": "#/definitions/obj.InviteStatus"
                },
                "usesCount": {
                    "type": "integer"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "obj.UserStats": {
            "type": "object",
            "properties": {
                "gamesCreated": {
                    "type": "integer"
                },
                "gamesPlayed": {
                    "type": "integer"
                },
                "messagesSent": {
                    "type": "integer"
                },
                "totalPlaysOnGames": {
                    "type": "integer"
                }
            }
        },
        "obj.Workshop": {
            "type": "object",
            "properties": {
                "active": {
                    "type": "boolean"
                },
                "aiQualityTier": {
                    "description": "Workshop settings (configured by staff/heads)",
                    "type": "string"
                },
                "defaultApiKeyShareId": {
                    "type": "string"
                },
                "designEditingEnabled": {
                    "type": "boolean"
                },
                "id": {
                    "type": "string"
                },
                "institution": {
                    "$ref": "#/definitions/obj.Institution"
                },
                "invites": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.UserRoleInvite"
                    }
                },
                "isPaused": {
                    "type": "boolean"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "name": {
                    "type": "string"
                },
                "participants": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.WorkshopParticipant"
                    }
                },
                "public": {
                    "type": "boolean"
                },
                "showOtherParticipantsGames": {
                    "type": "boolean"
                },
                "showPublicGames": {
                    "type": "boolean"
                }
            }
        },
        "obj.WorkshopParticipant": {
            "type": "object",
            "properties": {
                "accessToken": {
                    "type": "string"
                },
                "active": {
                    "type": "boolean"
                },
                "gamesCount": {
                    "type": "integer"
                },
                "id": {
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "name": {
                    "type": "string"
                },
                "role": {
                    "$ref": "#/definitions/obj.Role"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "routes.AcceptInviteResponse": {
            "type": "object",
            "properties": {
                "authToken": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                },
                "user": {
                    "$ref": "#/definitions/obj.User"
                }
            }
        },
        "routes.ApiKeyInfoResponse": {
            "type": "object",
            "properties": {
                "linkedShares": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.ApiKeyShare"
                    }
                },
                "share": {
                    "$ref": "#/definitions/obj.ApiKeyShare"
                }
            }
        },
        "routes.ApiKeysResponse": {
            "type": "object",
            "properties": {
                "apiKeys": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.ApiKey"
                    }
                },
                "shares": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.ApiKeyShare"
                    }
                }
            }
        },
        "routes.CreateApiKeyRequest": {
            "type": "object",
            "properties": {
                "key": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "platform": {
                    "type": "string"
                }
            }
        },
        "routes.CreateGameRequest": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "public": {
                    "type": "boolean"
                }
            }
        },
        "routes.CreateInstitutionInviteRequest": {
            "type": "object",
            "properties": {
                "institutionId": {
                    "type": "string"
                },
                "invitedEmail": {
                    "type": "string"
                },
                "invitedUserId": {
                    "type": "string"
                },
                "role": {
                    "type": "string"
                }
            }
        },
        "routes.CreateInstitutionRequest": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        },
        "routes.CreateWorkshopInviteRequest": {
            "type": "object",
            "properties": {
                "expiresAt": {
                    "type": "string"
                },
                "maxUses": {
                    "type": "integer"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "routes.CreateWorkshopRequest": {
            "type": "object",
            "properties": {
                "active": {
                    "type": "boolean"
                },
                "institutionId": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "public": {
                    "type": "boolean"
                }
            }
        },
        "routes.GuestGameInfo": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "remaining": {
                    "description": "null = unlimited, 0 = exhausted",
                    "type": "integer"
                }
            }
        },
        "routes.GuestSessionResponse": {
            "type": "object",
            "properties": {
                "aiModel": {
                    "type": "string"
                },
                "aiPlatform": {
                    "description": "AI model used for playing.",
                    "type": "string"
                },
                "aiSession": {
                    "description": "JSON with arbitrary details to be used within that model and within that session.",
                    "type": "string"
                },
                "apiKey": {
                    "$ref": "#/definitions/obj.ApiKey"
                },
                "apiKeyId": {
                    "description": "API key used to pay for this session (sponsored or user-owned), implicitly defines platform.\nNullable: key may be deleted, session can continue with a new key.",
                    "type": "string"
                },
                "gameDescription": {
                    "type": "string"
                },
                "gameId": {
                    "type": "string"
                },
                "gameName": {
                    "type": "string"
                },
                "gameScenario": {
                    "type": "string"
                },
                "gameScenarioImagePrompt": {
                    "description": "Condensed, image-focused scenario guidance derived from GameScenario via ToolQuery.\nPersisted indirectly via AiSession cache, not as its own DB column.",
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "imageStyle": {
                    "type": "string"
                },
                "isOrganisationUnverified": {
                    "description": "Set to true when image generation fails due to organization verification required",
                    "type": "boolean"
                },
                "language": {
                    "description": "Language used for this session (ISO 639-1 code), locked at creation time from user preference.",
                    "type": "string"
                },
                "messages": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/routes.SessionMessageResponse"
                    }
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "statusFields": {
                    "description": "Defines the status fields available in the game; copied from game.status_fields at launch.",
                    "type": "string"
                },
                "theme": {
                    "description": "AI-generated visual theme for the game player UI (JSON)",
                    "allOf": [
                        {
                            "$ref": "#/definitions/obj.GameTheme"
                        }
                    ]
                },
                "userId": {
                    "type": "string"
                },
                "userName": {
                    "type": "string"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "routes.ImageStatusResponse": {
            "type": "object",
            "properties": {
                "errorCode": {
                    "type": "string"
                },
                "errorMsg": {
                    "type": "string"
                },
                "exists": {
                    "type": "boolean"
                },
                "hasError": {
                    "type": "boolean"
                },
                "hash": {
                    "type": "string"
                },
                "isComplete": {
                    "type": "boolean"
                },
                "isOrganisationUnverified": {
                    "type": "boolean"
                }
            }
        },
        "routes.InviteResponse": {
            "type": "object",
            "properties": {
                "createdAt": {
                    "type": "string"
                },
                "expiresAt": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "institutionId": {
                    "type": "string"
                },
                "institutionName": {
                    "type": "string"
                },
                "inviteToken": {
                    "type": "string"
                },
                "invitedEmail": {
                    "type": "string"
                },
                "invitedUserId": {
                    "type": "string"
                },
                "maxUses": {
                    "type": "integer"
                },
                "modifiedAt": {
                    "type": "string"
                },
                "role": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "usesCount": {
                    "type": "integer"
                },
                "workshopId": {
                    "type": "string"
                },
                "workshopName": {
                    "type": "string"
                }
            }
        },
        "routes.Language": {
            "type": "object",
            "properties": {
                "iso": {
                    "type": "string"
                },
                "label": {
                    "type": "string"
                }
            }
        },
        "routes.MessageStatusResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "description": "Fatal error message (AI failure)",
                    "type": "string"
                },
                "errorCode": {
                    "description": "Machine-readable error code",
                    "type": "string"
                },
                "imageError": {
                    "description": "Machine-readable image error code",
                    "type": "string"
                },
                "imageHash": {
                    "description": "Hash for cache-busting image URL",
                    "type": "string"
                },
                "imageStatus": {
                    "description": "\"none\" | \"generating\" | \"complete\" | \"error\"",
                    "type": "string"
                },
                "statusFields": {
                    "description": "Current status fields",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.StatusField"
                    }
                },
                "text": {
                    "description": "Current full text of the message",
                    "type": "string"
                },
                "textDone": {
                    "description": "True when text streaming is complete (Stream=false in DB)",
                    "type": "boolean"
                }
            }
        },
        "routes.ParticipantLoginRequest": {
            "type": "object",
            "properties": {
                "token": {
                    "type": "string"
                }
            }
        },
        "routes.PrivateShareRequest": {
            "type": "object",
            "properties": {
                "maxSessions": {
                    "description": "null = unlimited",
                    "type": "integer"
                },
                "sponsorKeyShareId": {
                    "description": "required to enable",
                    "type": "string"
                }
            }
        },
        "routes.PrivateShareStatus": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean"
                },
                "privateSponsoredApiKeyShareId": {
                    "type": "string"
                },
                "remaining": {
                    "description": "null = unlimited",
                    "type": "integer"
                },
                "shareUrl": {
                    "type": "string"
                },
                "token": {
                    "type": "string"
                }
            }
        },
        "routes.RegisterRequest": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "routes.RolesResponse": {
            "type": "object",
            "properties": {
                "roles": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.Role"
                    }
                }
            }
        },
        "routes.SessionActionRequest": {
            "type": "object",
            "properties": {
                "audioBase64": {
                    "description": "Base64-encoded audio from voice input",
                    "type": "string"
                },
                "audioMimeType": {
                    "description": "MIME type of the audio (e.g. \"audio/webm;codecs=opus\")",
                    "type": "string"
                },
                "message": {
                    "type": "string"
                },
                "statusFields": {
                    "description": "Current status to pass to AI",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.StatusField"
                    }
                }
            }
        },
        "routes.SessionMessageResponse": {
            "type": "object",
            "properties": {
                "audio": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "gameSessionId": {
                    "type": "string"
                },
                "hasAudioIn": {
                    "description": "true when voice input (STT) is available for this session tier",
                    "type": "boolean"
                },
                "hasAudioOut": {
                    "description": "true when audio narration (TTS) is active for this message",
                    "type": "boolean"
                },
                "hasImage": {
                    "description": "true when image generation is active for this message",
                    "type": "boolean"
                },
                "id": {
                    "type": "string"
                },
                "image": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "imagePrompt": {
                    "type": "string"
                },
                "message": {
                    "description": "Plain text of the scene (system message, player action, or game response).",
                    "type": "string"
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "plot": {
                    "type": "string"
                },
                "requestExpandStory": {
                    "type": "string"
                },
                "requestImageGeneration": {
                    "type": "string"
                },
                "requestResponseSchema": {
                    "type": "string"
                },
                "requestStatusUpdate": {
                    "type": "string"
                },
                "responseRaw": {
                    "type": "string"
                },
                "seq": {
                    "description": "Sequence number within the session, starting at 1",
                    "type": "integer"
                },
                "statusFields": {
                    "description": "JSON encoded status fields.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.StatusField"
                    }
                },
                "stream": {
                    "type": "boolean"
                },
                "tokenUsage": {
                    "$ref": "#/definitions/obj.TokenUsage"
                },
                "transcription": {
                    "description": "Transcription holds the text result of audio-to-text conversion (transient, not persisted).\nReturned in the action response so the client can display what was recognized.",
                    "type": "string"
                },
                "type": {
                    "description": "player: user message; game: LLM/game response; system: initial system/context messages.",
                    "type": "string"
                },
                "urlAnalytics": {
                    "type": "string"
                }
            }
        },
        "routes.SessionResponse": {
            "type": "object",
            "properties": {
                "aiModel": {
                    "type": "string"
                },
                "aiPlatform": {
                    "description": "AI model used for playing.",
                    "type": "string"
                },
                "aiSession": {
                    "description": "JSON with arbitrary details to be used within that model and within that session.",
                    "type": "string"
                },
                "apiKey": {
                    "$ref": "#/definitions/obj.ApiKey"
                },
                "apiKeyId": {
                    "description": "API key used to pay for this session (sponsored or user-owned), implicitly defines platform.\nNullable: key may be deleted, session can continue with a new key.",
                    "type": "string"
                },
                "gameDescription": {
                    "type": "string"
                },
                "gameId": {
                    "type": "string"
                },
                "gameName": {
                    "type": "string"
                },
                "gameScenario": {
                    "type": "string"
                },
                "gameScenarioImagePrompt": {
                    "description": "Condensed, image-focused scenario guidance derived from GameScenario via ToolQuery.\nPersisted indirectly via AiSession cache, not as its own DB column.",
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "imageStyle": {
                    "type": "string"
                },
                "isOrganisationUnverified": {
                    "description": "Set to true when image generation fails due to organization verification required",
                    "type": "boolean"
                },
                "language": {
                    "description": "Language used for this session (ISO 639-1 code), locked at creation time from user preference.",
                    "type": "string"
                },
                "messages": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/obj.GameSessionMessage"
                    }
                },
                "meta": {
                    "$ref": "#/definitions/obj.Meta"
                },
                "statusFields": {
                    "description": "Defines the status fields available in the game; copied from game.status_fields at launch.",
                    "type": "string"
                },
                "theme": {
                    "description": "AI-generated visual theme for the game player UI (JSON)",
                    "allOf": [
                        {
                            "$ref": "#/definitions/obj.GameTheme"
                        }
                    ]
                },
                "userId": {
                    "type": "string"
                },
                "userName": {
                    "type": "string"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "routes.SetActiveWorkshopRequest": {
            "type": "object",
            "properties": {
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "routes.SetFreeUseApiKeyRequest": {
            "type": "object",
            "properties": {
                "apiKeyId": {
                    "type": "string"
                }
            }
        },
        "routes.SetInstitutionFreeUseKeyRequest": {
            "type": "object",
            "properties": {
                "shareId": {
                    "type": "string"
                }
            }
        },
        "routes.SetUserRoleRequest": {
            "type": "object",
            "properties": {
                "institutionId": {
                    "type": "string"
                },
                "role": {
                    "type": "string"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "routes.SetWorkshopApiKeyRequest": {
            "type": "object",
            "properties": {
                "apiKeyId": {
                    "type": "string"
                },
                "apiKeyShareId": {
                    "type": "string"
                }
            }
        },
        "routes.ShareRequest": {
            "type": "object",
            "properties": {
                "allowPublicGameSponsoring": {
                    "type": "boolean"
                },
                "institutionId": {
                    "type": "string"
                },
                "userId": {
                    "type": "string"
                },
                "workshopId": {
                    "type": "string"
                }
            }
        },
        "routes.SponsorGameRequest": {
            "type": "object",
            "properties": {
                "shareId": {
                    "type": "string"
                }
            }
        },
        "routes.StatusResponse": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "string"
                },
                "uptime": {
                    "type": "string"
                }
            }
        },
        "routes.UpdateApiKeyRequest": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        },
        "routes.UpdateApiKeyShareRequest": {
            "type": "object",
            "properties": {
                "allowPublicGameSponsoring": {
                    "type": "boolean"
                }
            }
        },
        "routes.UpdateInstitutionRequest": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        },
        "routes.UpdateSystemSettingsRequest": {
            "type": "object",
            "properties": {
                "defaultAiQualityTier": {
                    "type": "string"
                },
                "freeUseAiQualityTier": {
                    "type": "string"
                }
            }
        },
        "routes.UpdateWorkshopRequest": {
            "type": "object",
            "properties": {
                "active": {
                    "type": "boolean"
                },
                "aiQualityTier": {
                    "type": "string"
                },
                "designEditingEnabled": {
                    "type": "boolean"
                },
                "isPaused": {
                    "type": "boolean"
                },
                "name": {
                    "type": "string"
                },
                "public": {
                    "type": "boolean"
                },
                "showOtherParticipantsGames": {
                    "type": "boolean"
                },
                "showPublicGames": {
                    "type": "boolean"
                }
            }
        },
        "routes.UserUpdateRequest": {
            "type": "object",
            "properties": {
                "aiQualityTier": {
                    "type": "string"
                },
                "defaultApiKeyShareId": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "routes.UsersJwtResponse": {
            "type": "object",
            "properties": {
                "auth0Id": {
                    "type": "string"
                },
                "token": {
                    "type": "string"
                },
                "userId": {
                    "type": "string"
                }
            }
        },
        "routes.UsersNewRequest": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "routes.VersionResponse": {
            "type": "object",
            "properties": {
                "buildTime": {
                    "type": "string"
                },
                "dbLevel": {
                    "type": "integer"
                },
                "gitCommit": {
                    "type": "string"
                },
                "version": {
                    "type": "string"
                }
            }
        },
        "uuid.NullUUID": {
            "type": "object",
            "properties": {
                "uuid": {
                    "type": "string"
                },
                "valid": {
                    "description": "Valid is true if UUID is not NULL",
                    "type": "boolean"
                }
            }
        }
    },
    "securityDefinitions": {
        "BearerAuth": {
            "description": "JWT token in format: Bearer {token}",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}